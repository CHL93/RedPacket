
# 乐观锁--实现多线程抢红包算法

## 目标
   多人抢红包时保证红包金额金和红包个数的准确，同时保证并发性。

## 实现
涉及抢红包线程安全的元素有：红包金额sum和红包个数count。
* 由于需要同时控制两个变量的原子性操作，所以可以通过AtomicStampedReference来实现，版本号初始化为红包个数，在这个场景中，每次抢依次红包改变不是加1，而是减1。
* 也可以将红包金额和红包个数包装在一个对象里，采用AtomicReference保证对象的原子性从而保证红包金额和红包个数的原子性。
